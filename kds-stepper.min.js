function KdsStepperController(e,t,r,n,s,i){function p(){void 0==o.currentStep&&(o.currentStep=0)}var o=this;e.$parent;o.steps=[],o.element=t,o.attrs=r,o.defaultStepLabel="Step ",o.stepLabel=o.defaultStepLabel,o.doneSteps=[],o.attrOrientation=r.kdsOrientation||"horizontal",Object.defineProperty(o,"orientation",{get:function(){return"vertical"==o.attrOrientation||"column"==o.attrOrientation?"column":"horizontal"==o.attrOrientation||"row"==o.attrOrientation?"row":void 0}}),p(),this.changeStepItem=function(e,t){var r,n=e.target;"kds-step-item"==n.localName?r=n:n=i.getClosest(n,"kds-step-item"),n.disabled||(o.currentStep=t.$index)},o.isDisabled=function(e){var t,r,n,s=!1,i=e.$index,p=e.step;if(p.done||i<o.currentStep)return!1;if(i>0&&(r=o.steps[e.$index-1],r.index=e.$index-1,r.done))return!1;i<o.steps.length-1&&(n=o.steps[e.$index+1]);for(var a=0;a<o.steps.length;a++){if(t=o.steps[a],void 0!==r&&r.optional&&o.currentStep==r.index)return!1;if(!t.optional&&o.currentStep!=e.$index&&!t.optional&&o.currentStep!=e.$index)return!0}return s},o.checkPage=function(e){return o.currentStep===e},e.$watch(function(){return o.currentStep},function(e,r){s(function(){var n=t.find("kds-step");e>r?n.addClass("kds-left").removeClass("kds-right"):0!==r&&n.addClass("kds-right").removeClass("kds-left")})})}function KdsStepper(e,t){return{scope:{currentStep:"=?",isLoading:"=?",loadingMessage:"=?"},restrict:"EA",controller:"KdsStepperController",controllerAs:"$kdsStepperCtrl",bindToController:!0,terminal:!0,template:function(e,t){var r=e.children();return t.$kdsSteps=r,'<kds-steps-message class="feedback-animation" ng-if="$kdsStepperCtrl.isLoading" layout="{{$kdsStepperCtrl.orientation}}" layout-align="left center"><span>{{$kdsStepperCtrl.steps[$kdsStepperCtrl.currentStep].message}}</span></kds-steps-message><kds-steps-wrapper ng-if="!$kdsStepperCtrl.isLoading" layout="{{$kdsStepperCtrl.orientation}}"> </kds-steps-wrapper><kds-steps-content><kds-step-loading class="feedback-animation" ng-if="$kdsStepperCtrl.isLoading" layout="row" layout-align="center center"><md-progress-circular md-mode="indeterminate"></md-progress-circular></kds-step-loading><kds-step ng-if="$kdsStepperCtrl.checkPage($index)" ng-repeat="step in $kdsStepperCtrl.steps"></kds-step></kds-steps-content>'},link:function(e,r,n,s,i){for(var p,o,a,d=r.contents(),l=n.$kdsSteps,c=[],u=0;u<l.length;u++){p=l[u].getAttribute("label"),l[u].removeAttribute("label");var g=l[u].getAttribute("message")||s.defaultMessage;o=l[u],p=o.getAttribute("label"),o.removeAttribute("label");var m=o.getAttribute("step-optional");a=""==m||1==m,c.push({label:p,elem:o,done:!1,message:g,optional:a})}s.steps=c,t(d)(e)}}}function KdsStepperWrapper(){return{restrict:"E",require:"^kdsStepper",template:function(){return'<kds-step-item flex layout="row" layout-align="center center" ng-repeat="step in $kdsStepperCtrl.steps" ng-disabled="$kdsStepperCtrl.isDisabled(this)" kds-step-done="true" ng-click="$kdsStepperCtrl.changeStepItem($event, this)"ng-class="{active: $index == $kdsStepperCtrl.currentStep}" md-ink-ripple="#aaa"><md-button flex="none" class="md-fab md-mini md-primary"  md-no-ink  aria-label="{{step.attrs.kdsLabel}}"><md-icon md-svg-icon="md-done" ng-show="step.done"></md-icon><md-icon md-svg-icon="md-warning" ng-show="step.warning"></md-icon><md-icon md-svg-icon="md-error" ng-show="step.error"></md-icon><span ng-show="!step.done">{{ ($index + 1) }}</span> </md-button><span flex="none"> {{ step.label ||  $kdsStepperCtrl.stepLabel + ($index+1) }}  </span><span flex style="height: 1px; background:rgba(0,0,0,.15); margin-left: 8px"></span> </kds-step-item>'}}}function kdsStepsContent(){return{restrict:"E",require:"^kdsStepper"}}function KdsStep(e){return{terminal:!0,restrict:"E",require:"^kdsStepper",link:function(t,r,n,s){for(var i=t.$parent.step.elem,p=i.attributes,o=0;o<p.length;o++)n.$set(normalizeName(p[o].name),p[o].value);var a=r.parent().children(),d=(Array.prototype.indexOf.call(a,r[0]),t.$parent.$parent.$parent),l=e(i.innerHTML)(d);r.append(l),t.$watch(function(){return d.$eval(n.stepDone)},function(e,t){s.steps[s.currentStep],e&&!t&&(s.steps[s.currentStep].done=!0,s.currentStep++)}),t.$watch(function(){return d.$eval(n.stepWarning)},function(e,t){e&&(s.steps[s.currentStep].warning=!0)}),t.$watch(function(){return d.$eval(n.stepError)},function(e,t){e&&(s.steps[s.currentStep].error=!0)})}}}function normalizeName(e){var t=e.indexOf("-");if(t>-1){e=e.replace("-","");var r=e[t].toUpperCase();e=e.split(""),e[t]=r,e=e.join("")}return e}angular.module("kds.stepper",["ngMaterial"]).config(["$mdIconProvider",function(e){e.icon(iconDone.id,iconDone.url,24),e.icon(iconWarning.id,iconWarning.url,24),e.icon(iconError.id,iconError.url,24)}]).run(["$http","$templateCache",function(e,t){t.put(iconDone.url,iconDone.svg),t.put(iconWarning.url,iconWarning.svg),t.put(iconError.url,iconError.svg)}]);var iconDone={id:"md-done",url:"md-done.svg",svg:'<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/> </svg>>'},iconWarning={id:"md-warning",url:"md-warning.svg",svg:'<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/> </svg>'},iconError={id:"md-error",url:"md-error.svg",svg:'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/> </svg>'};angular.module("kds.stepper").controller("KdsStepperController",KdsStepperController),KdsStepperController.$inject=["$scope","$element","$attrs","$compile","$timeout","$mdUtil"],angular.module("kds.stepper").directive("kdsStepper",KdsStepper),KdsStepper.$inject=["$mdTheming","$compile"],angular.module("kds.stepper").directive("kdsStepsWrapper",KdsStepperWrapper),angular.module("kds.stepper").directive("kdsStepsContent",kdsStepsContent),angular.module("kds.stepper").directive("kdsStep",KdsStep),KdsStep.$inject=["$compile"];