function KdsStepperController(e,t,n,s,a,i,o,c,r,f){function d(){oe.selectedIndex=oe.selectedIndex||0,l(),p(),u(),f(t),i.nextTick(function(){te(),V(),ne(),oe.steps[oe.selectedIndex]&&oe.steps[oe.selectedIndex].scope.select(),le=!0,j()})}function l(){var e=c.$kdsStepsTemplate,t=angular.element(re.data);t.html(e),r(t.contents())(oe.parent),delete c.$kdsStepsTemplate}function u(){angular.element(n).on("resize",P),e.$on("$destroy",m)}function p(){e.$watch("$kdsStepperCtrl.selectedIndex",w)}function g(e,t){var n=c.$normalize("md-"+e);t&&Y(e,t),c.$observe(n,function(t){oe[e]=t})}function h(e,t){function n(t){oe[e]="false"!==t}var s=c.$normalize("md-"+e);t&&Y(e,t),c.hasOwnProperty(s)&&n(c[s]),c.$observe(s,n)}function m(){de=!0,angular.element(n).off("resize",P)}function x(e){angular.element(re.wrapper).toggleClass("md-stretch-tabs",F()),ne()}function b(e){oe.shouldCenterTabs=H()}function I(e,t){e!==t&&(angular.forEach(re.tabs,function(t){t.style.maxWidth=e+"px"}),i.nextTick(oe.updateInkBarStyles))}function k(e,t){e!==t&&(oe.maxTabWidth=G(),oe.shouldCenterTabs=H(),i.nextTick(function(){oe.maxTabWidth=G(),V(oe.selectedIndex)}))}function T(e){t[e?"removeClass":"addClass"]("md-no-tab-content")}function v(t){var n=oe.shouldCenterTabs?"":"-"+t+"px";angular.element(re.paging).css(s.CSS.TRANSFORM,"translate3d("+n+", 0, 0)"),e.$broadcast("$mdTabsPaginationChanged")}function C(e,t){e!==t&&re.tabs[e]&&(V(),Q())}function w(t,n){t!==n&&(oe.selectedIndex=z(t),oe.lastSelectedIndex=n,oe.updateInkBarStyles(),te(),V(t),e.$broadcast("$mdTabsChanged"),oe.steps[n]&&oe.steps[n].scope.deselect(),oe.steps[t]&&oe.steps[t].scope.select())}function y(e){var n=t[0].getElementsByTagName("kds-step");return Array.prototype.indexOf.call(n,e[0])}function E(){E.watcher||(E.watcher=e.$watch(function(){i.nextTick(function(){E.watcher&&t.prop("offsetParent")&&(E.watcher(),E.watcher=null,P())},!1)}))}function L(e){switch(e.keyCode){case s.KEY_CODE.LEFT_ARROW:e.preventDefault(),J(-1,!0);break;case s.KEY_CODE.RIGHT_ARROW:e.preventDefault(),J(1,!0);break;case s.KEY_CODE.SPACE:case s.KEY_CODE.ENTER:e.preventDefault(),ce||(oe.selectedIndex=oe.focusIndex)}oe.lastClick=!1}function W(e,t){ce||(oe.focusIndex=oe.selectedIndex=e),oe.lastClick=!0,t&&oe.noSelectClick||i.nextTick(function(){oe.steps[e].element.triggerHandler("click")},!1)}function $(e){oe.shouldPaginate&&(e.preventDefault(),oe.offsetLeft=ae(oe.offsetLeft-e.wheelDelta))}function B(){var e,t,n=re.canvas.clientWidth,s=n+oe.offsetLeft;for(e=0;e<re.tabs.length&&(t=re.tabs[e],!(t.offsetLeft+t.offsetWidth>s));e++);oe.offsetLeft=ae(t.offsetLeft)}function S(){var e,t;for(e=0;e<re.tabs.length&&(t=re.tabs[e],!(t.offsetLeft+t.offsetWidth>=oe.offsetLeft));e++);oe.offsetLeft=ae(t.offsetLeft+t.offsetWidth-re.canvas.clientWidth)}function P(){oe.lastSelectedIndex=oe.selectedIndex,oe.offsetLeft=ae(oe.offsetLeft),i.nextTick(function(){oe.updateInkBarStyles(),j()})}function O(e){angular.element(re.inkBar).toggleClass("ng-hide",e)}function D(e){t.toggleClass("md-dynamic-height",e)}function N(e){if(!de){var t=oe.selectedIndex,n=oe.steps.splice(e.getIndex(),1)[0];ee(),oe.selectedIndex===t&&(n.scope.deselect(),oe.steps[oe.selectedIndex]&&oe.steps[oe.selectedIndex].scope.select()),i.nextTick(function(){j(),oe.offsetLeft=ae(oe.offsetLeft)})}}function R(e,t){var n=le,s={getIndex:function(){return oe.steps.indexOf(a)},isActive:function(){return this.getIndex()===oe.selectedIndex},isLeft:function(){return this.getIndex()<oe.selectedIndex},isRight:function(){return this.getIndex()>oe.selectedIndex},shouldRender:function(){return!oe.noDisconnect||this.isActive()},hasFocus:function(){return!oe.lastClick&&oe.hasFocus&&this.getIndex()===oe.focusIndex},id:i.nextUid()},a=angular.extend(s,e);return angular.isDefined(t)?oe.steps.splice(t,0,a):oe.steps.push(a),X(),Z(),i.nextTick(function(){j(),n&&oe.autoselect&&i.nextTick(function(){i.nextTick(function(){W(oe.steps.indexOf(a))})})}),a}function M(){var e={};return e.wrapper=t[0].getElementsByTagName("kds-steps-wrapper")[0],e.data=t[0].getElementsByTagName("kds-step-data")[0],e.canvas=e.wrapper.getElementsByTagName("kds-steps-canvas")[0],e.paging=e.canvas.getElementsByTagName("kds-pagination-wrapper")[0],e.tabs=e.paging.getElementsByTagName("kds-step-item"),e.dummies=e.canvas.getElementsByTagName("kds-dummy-tab"),e.inkBar=e.paging.getElementsByTagName("md-ink-bar")[0],e.contentsWrapper=t[0].getElementsByTagName("kds-steps-content-wrapper")[0],e.contents=e.contentsWrapper.getElementsByTagName("kds-step-content"),e}function A(){return oe.offsetLeft>0}function K(){var e=re.tabs[re.tabs.length-1];return e&&e.offsetLeft+e.offsetWidth>re.canvas.clientWidth+oe.offsetLeft}function F(){switch(oe.stretchTabs){case"always":return!0;case"never":return!1;default:return!oe.shouldPaginate&&n.matchMedia("(max-width: 600px)").matches}}function H(){return oe.centerTabs&&!oe.shouldPaginate}function _(){if(oe.noPagination||!le)return!1;var e=t.prop("clientWidth");return angular.forEach(M().dummies,function(t){e-=t.offsetWidth}),0>e}function z(e){if(-1===e)return-1;var t,n,s=Math.max(oe.steps.length-e,e);for(t=0;s>=t;t++){if(n=oe.steps[e+t],n&&n.scope.disabled!==!0)return n.getIndex();if(n=oe.steps[e-t],n&&n.scope.disabled!==!0)return n.getIndex()}return e}function Y(e,t,n){Object.defineProperty(oe,e,{get:function(){return n},set:function(e){var s=n;n=e,t&&t(e,s)}})}function j(){F()||U(),oe.maxTabWidth=G(),oe.shouldPaginate=_()}function U(){var e=1;angular.forEach(M().dummies,function(t){e+=Math.max(t.offsetWidth,t.getBoundingClientRect().width)}),angular.element(re.paging).css("width",Math.ceil(e)+"px")}function G(){return t.prop("clientWidth")}function q(){var e=oe.steps[oe.selectedIndex],t=oe.steps[oe.focusIndex];oe.steps=oe.steps.sort(function(e,t){return e.index-t.index}),oe.selectedIndex=oe.steps.indexOf(e),oe.focusIndex=oe.steps.indexOf(t)}function J(e,t){var n,s=t?"focusIndex":"selectedIndex",a=oe[s];for(n=a+e;oe.steps[n]&&oe.steps[n].scope.disabled;n+=e);oe.steps[n]&&(oe[s]=n)}function Q(){M().dummies[oe.focusIndex].focus()}function V(e){if(null==e&&(e=oe.focusIndex),re.tabs[e]&&!oe.shouldCenterTabs){var t=re.tabs[e],n=t.offsetLeft,s=t.offsetWidth+n;oe.offsetLeft=Math.max(oe.offsetLeft,ae(s-re.canvas.clientWidth+64)),oe.offsetLeft=Math.min(oe.offsetLeft,ae(n))}}function X(){fe.forEach(function(e){i.nextTick(e)}),fe=[]}function Z(){var e=!1;angular.forEach(oe.steps,function(t){t.template&&(e=!0)}),oe.hasContent=e}function ee(){oe.selectedIndex=z(oe.selectedIndex),oe.focusIndex=z(oe.focusIndex)}function te(){if(!oe.dynamicHeight)return t.css("height","");if(!oe.steps.length)return fe.push(te);var e=re.contents[oe.selectedIndex],n=e?e.offsetHeight:0,s=re.wrapper.offsetHeight,a=n+s,c=t.prop("clientHeight");if(c!==a){"bottom"===t.attr("md-align-tabs")&&(c-=s,a-=s,void 0!==t.attr("md-border-bottom")&&++c),ce=!0;var r={height:c+"px"},f={height:a+"px"};t.css(r),o(t,{from:r,to:f,easing:"cubic-bezier(0.35, 0, 0.25, 1)",duration:.5}).start().done(function(){t.css({transition:"none",height:""}),i.nextTick(function(){t.css("transition","")}),ce=!1})}}function ne(){if(!re.tabs[oe.selectedIndex])return void angular.element(re.inkBar).css({left:"auto",right:"auto"});if(!oe.steps.length)return fe.push(oe.updateInkBarStyles);if(!t.prop("offsetParent"))return E();var e,n=oe.selectedIndex,s=re.paging.offsetWidth,a=re.tabs[n],o=a.offsetLeft,c=s-o-a.offsetWidth;oe.shouldCenterTabs&&(e=Array.prototype.slice.call(re.tabs).reduce(function(e,t){return e+t.offsetWidth},0),s>e&&i.nextTick(ne,!1)),se(),angular.element(re.inkBar).css({left:o+"px",right:c+"px"})}function se(){var e=oe.selectedIndex,t=oe.lastSelectedIndex,n=angular.element(re.inkBar);angular.isNumber(t)&&n.toggleClass("md-left",t>e).toggleClass("md-right",e>t)}function ae(e){if(!re.tabs.length||!oe.shouldPaginate)return 0;var t=re.tabs[re.tabs.length-1],n=t.offsetLeft+t.offsetWidth;return e=Math.max(0,e),e=Math.min(n-re.canvas.clientWidth,e)}function ie(e,t){var n={colorElement:angular.element(re.inkBar)};a.attach(e,t,n)}var oe=this,ce=!1,re=M(),fe=[],de=!1,le=!1;g("stretchTabs",x),Y("focusIndex",C,oe.selectedIndex||0),Y("offsetLeft",v,0),Y("hasContent",T,!1),Y("maxTabWidth",I,G()),Y("shouldPaginate",k,!1),h("noInkBar",O),h("dynamicHeight",D),h("noPagination"),h("swipeContent"),h("noDisconnect"),h("autoselect"),h("noSelectClick"),h("centerTabs",b,!1),h("enableDisconnect"),oe.scope=e,oe.parent=e.$parent,oe.steps=[],oe.lastSelectedIndex=null,oe.hasFocus=!1,oe.lastClick=!0,oe.shouldCenterTabs=H(),oe.updatePagination=i.debounce(j,100),oe.redirectFocus=Q,oe.attachRipple=ie,oe.insertTab=R,oe.removeTab=N,oe.select=W,oe.scroll=$,oe.nextPage=B,oe.previousPage=S,oe.keydown=L,oe.canPageForward=K,oe.canPageBack=A,oe.refreshIndex=ee,oe.incrementIndex=J,oe.getTabElementIndex=y,oe.updateInkBarStyles=i.debounce(ne,100),oe.updateTabOrder=i.debounce(q,100),d()}!function(e,t,n){"use strict";t.module("kds.stepper",["ngMaterial"])}(window,window.angular),angular.module("kds.stepper").controller("KdsStepperController",KdsStepperController),KdsStepperController.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming"];