function KdsStepperController(e,t,n,s,a,r,d,i,c,o){function l(){de.selectedIndex=de.selectedIndex||0,p(),f(),u(),o(t),r.nextTick(function(){te(),V(),ne(),de.steps[de.selectedIndex]&&de.steps[de.selectedIndex].scope.select(),pe=!0,U()})}function p(){var e=i.$kdsStepsTemplate,t=angular.element(ce.data);t.html(e),c(t.contents())(de.parent),delete i.$kdsStepsTemplate}function u(){angular.element(n).on("resize",W),e.$on("$destroy",b)}function f(){e.$watch("$kdsStepperCtrl.selectedIndex",I)}function m(e,t){var n=i.$normalize("md-"+e);t&&j(e,t),i.$observe(n,function(t){de[e]=t})}function g(e,t){function n(t){de[e]="false"!==t}var s=i.$normalize("md-"+e);t&&j(e,t),i.hasOwnProperty(s)&&n(i[s]),i.$observe(s,n)}function b(){le=!0,angular.element(n).off("resize",W)}function h(e){angular.element(ce.wrapper).toggleClass("md-stretch-tabs",M()),ne()}function k(e){de.shouldCenterTabs=H()}function x(e,t){e!==t&&(angular.forEach(ce.tabs,function(t){t.style.maxWidth=e+"px"}),r.nextTick(de.updateInkBarStyles))}function S(e,t){e!==t&&(de.maxTabWidth=q(),de.shouldCenterTabs=H(),r.nextTick(function(){de.maxTabWidth=q(),V(de.selectedIndex)}))}function v(e){t[e?"removeClass":"addClass"]("md-no-tab-content")}function C(t){var n=de.shouldCenterTabs?"":"-"+t+"px";angular.element(ce.paging).css(s.CSS.TRANSFORM,"translate3d("+n+", 0, 0)"),e.$broadcast("$mdTabsPaginationChanged")}function $(e,t){e!==t&&ce.tabs[e]&&(V(),Q())}function I(t,n){t!==n&&(de.selectedIndex=z(t),de.lastSelectedIndex=n,de.updateInkBarStyles(),te(),V(t),e.$broadcast("$mdTabsChanged"),de.steps[n]&&de.steps[n].scope.deselect(),de.steps[t]&&de.steps[t].scope.select())}function T(e){var n=t[0].getElementsByTagName("kds-step");return Array.prototype.indexOf.call(n,e[0])}function w(){w.watcher||(w.watcher=e.$watch(function(){r.nextTick(function(){w.watcher&&t.prop("offsetParent")&&(w.watcher(),w.watcher=null,W())},!1)}))}function y(e){switch(e.keyCode){case s.KEY_CODE.LEFT_ARROW:e.preventDefault(),J(-1,!0);break;case s.KEY_CODE.RIGHT_ARROW:e.preventDefault(),J(1,!0);break;case s.KEY_CODE.SPACE:case s.KEY_CODE.ENTER:e.preventDefault(),ie||(de.selectedIndex=de.focusIndex)}de.lastClick=!1}function P(e,t){ie||(de.focusIndex=de.selectedIndex=e),de.lastClick=!0,t&&de.noSelectClick||r.nextTick(function(){de.steps[e].element.triggerHandler("click")},!1)}function E(e){de.shouldPaginate&&(e.preventDefault(),de.offsetLeft=ae(de.offsetLeft-e.wheelDelta))}function L(){var e,t,n=ce.canvas.clientWidth,s=n+de.offsetLeft;for(e=0;e<ce.tabs.length&&(t=ce.tabs[e],!(t.offsetLeft+t.offsetWidth>s));e++);de.offsetLeft=ae(t.offsetLeft)}function B(){var e,t;for(e=0;e<ce.tabs.length&&(t=ce.tabs[e],!(t.offsetLeft+t.offsetWidth>=de.offsetLeft));e++);de.offsetLeft=ae(t.offsetLeft+t.offsetWidth-ce.canvas.clientWidth)}function W(){de.lastSelectedIndex=de.selectedIndex,de.offsetLeft=ae(de.offsetLeft),r.nextTick(function(){de.updateInkBarStyles(),U()})}function K(e){angular.element(ce.inkBar).toggleClass("ng-hide",e)}function D(e){t.toggleClass("md-dynamic-height",e)}function O(e){if(!le){var t=de.selectedIndex,n=de.steps.splice(e.getIndex(),1)[0];ee(),de.selectedIndex===t&&(n.scope.deselect(),de.steps[de.selectedIndex]&&de.steps[de.selectedIndex].scope.select()),r.nextTick(function(){U(),de.offsetLeft=ae(de.offsetLeft)})}}function A(e,t){var n=pe,s={getIndex:function(){return de.steps.indexOf(a)},isActive:function(){return this.getIndex()===de.selectedIndex},isLeft:function(){return this.getIndex()<de.selectedIndex},isRight:function(){return this.getIndex()>de.selectedIndex},shouldRender:function(){return!de.noDisconnect||this.isActive()},hasFocus:function(){return!de.lastClick&&de.hasFocus&&this.getIndex()===de.focusIndex},id:r.nextUid()},a=angular.extend(s,e);return angular.isDefined(t)?de.steps.splice(t,0,a):de.steps.push(a),X(),Z(),r.nextTick(function(){U(),n&&de.autoselect&&r.nextTick(function(){r.nextTick(function(){P(de.steps.indexOf(a))})})}),a}function R(){var e={};return e.wrapper=t[0].getElementsByTagName("kds-steps-wrapper")[0],e.data=t[0].getElementsByTagName("kds-step-data")[0],e.canvas=e.wrapper.getElementsByTagName("kds-steps-canvas")[0],e.paging=e.canvas.getElementsByTagName("kds-pagination-wrapper")[0],e.tabs=e.paging.getElementsByTagName("kds-step-item"),e.dummies=e.canvas.getElementsByTagName("kds-dummy-tab"),e.inkBar=e.paging.getElementsByTagName("md-ink-bar")[0],e.contentsWrapper=t[0].getElementsByTagName("kds-steps-content-wrapper")[0],e.contents=e.contentsWrapper.getElementsByTagName("kds-step-content"),e}function N(){return de.offsetLeft>0}function F(){var e=ce.tabs[ce.tabs.length-1];return e&&e.offsetLeft+e.offsetWidth>ce.canvas.clientWidth+de.offsetLeft}function M(){switch(de.stretchTabs){case"always":return!0;case"never":return!1;default:return!de.shouldPaginate&&n.matchMedia("(max-width: 600px)").matches}}function H(){return de.centerTabs&&!de.shouldPaginate}function _(){if(de.noPagination||!pe)return!1;var e=t.prop("clientWidth");return angular.forEach(R().dummies,function(t){e-=t.offsetWidth}),0>e}function z(e){if(-1===e)return-1;var t,n,s=Math.max(de.steps.length-e,e);for(t=0;s>=t;t++){if(n=de.steps[e+t],n&&n.scope.disabled!==!0)return n.getIndex();if(n=de.steps[e-t],n&&n.scope.disabled!==!0)return n.getIndex()}return e}function j(e,t,n){Object.defineProperty(de,e,{get:function(){return n},set:function(e){var s=n;n=e,t&&t(e,s)}})}function U(){M()||Y(),de.maxTabWidth=q(),de.shouldPaginate=_()}function Y(){var e=1;angular.forEach(R().dummies,function(t){e+=Math.max(t.offsetWidth,t.getBoundingClientRect().width)}),angular.element(ce.paging).css("width",Math.ceil(e)+"px")}function q(){return t.prop("clientWidth")}function G(){var e=de.steps[de.selectedIndex],t=de.steps[de.focusIndex];de.steps=de.steps.sort(function(e,t){return e.index-t.index}),de.selectedIndex=de.steps.indexOf(e),de.focusIndex=de.steps.indexOf(t)}function J(e,t){var n,s=t?"focusIndex":"selectedIndex",a=de[s];for(n=a+e;de.steps[n]&&de.steps[n].scope.disabled;n+=e);de.steps[n]&&(de[s]=n)}function Q(){R().dummies[de.focusIndex].focus()}function V(e){if(null==e&&(e=de.focusIndex),ce.tabs[e]&&!de.shouldCenterTabs){var t=ce.tabs[e],n=t.offsetLeft,s=t.offsetWidth+n;de.offsetLeft=Math.max(de.offsetLeft,ae(s-ce.canvas.clientWidth+64)),de.offsetLeft=Math.min(de.offsetLeft,ae(n))}}function X(){oe.forEach(function(e){r.nextTick(e)}),oe=[]}function Z(){var e=!1;angular.forEach(de.steps,function(t){t.template&&(e=!0)}),de.hasContent=e}function ee(){de.selectedIndex=z(de.selectedIndex),de.focusIndex=z(de.focusIndex)}function te(){if(!de.dynamicHeight)return t.css("height","");if(!de.steps.length)return oe.push(te);var e=ce.contents[de.selectedIndex],n=e?e.offsetHeight:0,s=ce.wrapper.offsetHeight,a=n+s,i=t.prop("clientHeight");if(i!==a){"bottom"===t.attr("md-align-tabs")&&(i-=s,a-=s,void 0!==t.attr("md-border-bottom")&&++i),ie=!0;var c={height:i+"px"},o={height:a+"px"};t.css(c),d(t,{from:c,to:o,easing:"cubic-bezier(0.35, 0, 0.25, 1)",duration:.5}).start().done(function(){t.css({transition:"none",height:""}),r.nextTick(function(){t.css("transition","")}),ie=!1})}}function ne(){if(!ce.tabs[de.selectedIndex])return void angular.element(ce.inkBar).css({left:"auto",right:"auto"});if(!de.steps.length)return oe.push(de.updateInkBarStyles);if(!t.prop("offsetParent"))return w();var e,n=de.selectedIndex,s=ce.paging.offsetWidth,a=ce.tabs[n],d=a.offsetLeft,i=s-d-a.offsetWidth;de.shouldCenterTabs&&(e=Array.prototype.slice.call(ce.tabs).reduce(function(e,t){return e+t.offsetWidth},0),s>e&&r.nextTick(ne,!1)),se(),angular.element(ce.inkBar).css({left:d+"px",right:i+"px"})}function se(){var e=de.selectedIndex,t=de.lastSelectedIndex,n=angular.element(ce.inkBar);angular.isNumber(t)&&n.toggleClass("md-left",t>e).toggleClass("md-right",e>t)}function ae(e){if(!ce.tabs.length||!de.shouldPaginate)return 0;var t=ce.tabs[ce.tabs.length-1],n=t.offsetLeft+t.offsetWidth;return e=Math.max(0,e),e=Math.min(n-ce.canvas.clientWidth,e)}function re(e,t){var n={colorElement:angular.element(ce.inkBar)};a.attach(e,t,n)}var de=this,ie=!1,ce=R(),oe=[],le=!1,pe=!1;m("stretchTabs",h),j("focusIndex",$,de.selectedIndex||0),j("offsetLeft",C,0),j("hasContent",v,!1),j("maxTabWidth",x,q()),j("shouldPaginate",S,!1),g("noInkBar",K),g("dynamicHeight",D),g("noPagination"),g("swipeContent"),g("noDisconnect"),g("autoselect"),g("noSelectClick"),g("centerTabs",k,!1),g("enableDisconnect"),de.scope=e,de.parent=e.$parent,de.steps=[],de.lastSelectedIndex=null,de.hasFocus=!1,de.lastClick=!0,de.shouldCenterTabs=H(),de.updatePagination=r.debounce(U,100),de.redirectFocus=Q,de.attachRipple=re,de.insertTab=A,de.removeTab=O,de.select=P,de.scroll=E,de.nextPage=L,de.previousPage=B,de.keydown=y,de.canPageForward=F,de.canPageBack=N,de.refreshIndex=ee,de.incrementIndex=J,de.getTabElementIndex=T,de.updateInkBarStyles=r.debounce(ne,100),de.updateTabOrder=r.debounce(G,100),l()}function KdsStep(){function e(e,n,s,a){if(a){var r=a.getTabElementIndex(n),d=t(n,"kds-step-body").remove(),i=t(n,"kds-step-label").remove(),c=a.insertTab({scope:e,parent:e.$parent,index:r,element:n,template:d.html(),label:i.html()},r);e.select=e.select||angular.noop,e.deselect=e.deselect||angular.noop,e.$watch("active",function(e){e&&a.select(c.getIndex(),!0)}),e.$watch("disabled",function(){a.refreshIndex()}),e.$watch(function(){return a.getTabElementIndex(n)},function(e){c.index=e,a.updateTabOrder()}),e.$on("$destroy",function(){a.removeTab(c)})}}function t(e,t){for(var n=e[0].children,s=0,a=n.length;a>s;s++){var r=n[s];if(r.tagName===t.toUpperCase())return angular.element(r)}return angular.element()}return{require:"^?kdsStepper",terminal:!0,compile:function(n,s){var a=t(n,"kds-step-label"),r=t(n,"kds-step-body");if(0==a.length&&(a=angular.element("<kds-step-label></kds-step-label>"),s.label?a.text(s.label):a.append(n.contents()),0==r.length)){var d=n.contents().detach();r=angular.element("<kds-step-body></kds-step-body>"),r.append(d)}return n.append(a),r.html()&&n.append(r),e},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect"}}}function KdsStepItem(){return{require:"^?kdsStepper",link:function(e,t,n,s){s&&s.attachRipple(e,t)}}}function KdsStepLabel(){return{terminal:!0}}function KdsStepScroll(e){return{restrict:"A",compile:function(t,n){var s=e(n.kdsStepScroll,null,!0);return function(e,t){t.on("mousewheel",function(t){e.$apply(function(){s(e,{$event:t})})})}}}}function KdsStepper(){return{scope:{selectedIndex:"=?mdSelected"},template:function(e,t){return t.$kdsStepsTemplate=e.html(),'<kds-steps-wrapper> <kds-step-data></kds-step-data> <md-prev-button tabindex="-1" role="button" aria-label="Previous Step" aria-disabled="{{!$kdsStepperCtrl.canPageBack()}}" ng-class="{ \'md-disabled\': !$kdsStepperCtrl.canPageBack() }" ng-if="$kdsStepperCtrl.shouldPaginate" ng-click="$kdsStepperCtrl.previousPage()"> <md-icon md-svg-icon="md-tabs-arrow"></md-icon> </md-prev-button> <md-next-button tabindex="-1" role="button" aria-label="Next Step" aria-disabled="{{!$kdsStepperCtrl.canPageForward()}}" ng-class="{ \'md-disabled\': !$kdsStepperCtrl.canPageForward() }" ng-if="$kdsStepperCtrl.shouldPaginate" ng-click="$kdsStepperCtrl.nextPage()"> <md-icon md-svg-icon="md-tabs-arrow"></md-icon> </md-next-button> <kds-steps-canvas role="tablist"tabindex="{{ $kdsStepperCtrl.hasFocus ? -1 : 0 }}" aria-activedescendant="tab-item-{{$kdsStepperCtrl.steps[$kdsStepperCtrl.focusIndex].id}}" ng-focus="$kdsStepperCtrl.redirectFocus()" ng-class="{ \'md-paginated\': $kdsStepperCtrl.shouldPaginate, \'md-center-tabs\': $kdsStepperCtrl.shouldCenterTabs }" ng-keydown="$kdsStepperCtrl.keydown($event)"> <kds-pagination-wrapper ng-class="{ \'md-center-tabs\': $kdsStepperCtrl.shouldCenterTabs }" md-tab-scroll="$kdsStepperCtrl.scroll($event)"> <kds-step-item tabindex="-1" class="kds-step" role="tab" ng-repeat="tab in $kdsStepperCtrl.steps" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-click="$kdsStepperCtrl.select(tab.getIndex())" ng-class="{ \'md-active\':    tab.isActive(), \'md-focused\':   tab.hasFocus(), \'md-disabled\':  tab.scope.disabled }" ng-disabled="tab.scope.disabled" md-swipe-left="$kdsStepperCtrl.nextPage()" md-swipe-right="$kdsStepperCtrl.previousPage()" kds-steps-template="::tab.label" md-scope="::tab.parent"> <md-button class="md-primary md-raised md-fab md-mini"> $index </md-button> </kds-step-item> <md-ink-bar></md-ink-bar> </kds-pagination-wrapper> <div class="md-visually-hidden md-dummy-wrapper"> <kds-dummy-tab class = "kds-step" role="tab" tabindex="-1" id="tab-item-{{::tab.id}}" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-focus="$kdsStepperCtrl.hasFocus = true" ng-blur="$kdsStepperCtrl.hasFocus = false" ng-repeat="tab in $kdsStepperCtrl.steps" kds-steps-template="::tab.label" md-scope="::tab.parent"></kds-dummy-tab> </div> </kds-steps-canvas></kds-steps-wrapper> <kds-steps-content-wrapper ng-show="$kdsStepperCtrl.hasContent && $kdsStepperCtrl.selectedIndex >= 0"> <kds-step-content id="tab-content-{{::tab.id}}" role="tabpanel" aria-labelledby="tab-item-{{::tab.id}}" md-swipe-left="$kdsStepperCtrl.swipeContent && $kdsStepperCtrl.incrementIndex(1)" md-swipe-right="$kdsStepperCtrl.swipeContent && $kdsStepperCtrl.incrementIndex(-1)" ng-if="$kdsStepperCtrl.hasContent" ng-repeat="(index, tab) in $kdsStepperCtrl.steps" ng-class="{ \'md-no-transition\': $kdsStepperCtrl.lastSelectedIndex == null, \'md-active\':        tab.isActive(), \'md-left\':          tab.isLeft(), \'md-right\':         tab.isRight(), \'md-no-scroll\':     $kdsStepperCtrl.dynamicHeight }"> <div kds-steps-template="::tab.template" md-connected-if="tab.isActive()" md-scope="::tab.parent" ng-if="$kdsStepperCtrl.enableDisconnect || tab.shouldRender()"></div> </kds-step-content> </kds-steps-content-wrapper>'},controller:"KdsStepperController",controllerAs:"$kdsStepperCtrl",bindToController:!0}}function KdsStepsTemplate(e,t){function n(n,s,a,r){function d(){n.$watch("connected",function(e){e===!1?i():c()}),n.$on("$destroy",c)}function i(){r.enableDisconnect&&t.disconnectScope(o)}function c(){r.enableDisconnect&&t.reconnectScope(o)}if(r){var o=r.enableDisconnect?n.compileScope.$new():n.compileScope;return s.html(n.template),e(s.contents())(o),s.on("DOMSubtreeModified",function(){r.updatePagination(),r.updateInkBarStyles()}),t.nextTick(d)}}return{restrict:"A",link:n,scope:{template:"=kdsStepsTemplate",connected:"=?mdConnectedIf",compileScope:"=mdScope"},require:"^?kdsStepper"}}!function(e,t,n){"use strict";t.module("kds.stepper",["ngMaterial"])}(window,window.angular),angular.module("kds.stepper").controller("KdsStepperController",KdsStepperController),KdsStepperController.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming"],angular.module("kds.stepper").directive("kdsStep",KdsStep),angular.module("kds.stepper").directive("kdsStepItem",KdsStepItem),angular.module("kds.stepper").directive("kdsStepLabel",KdsStepLabel),angular.module("kds.stepper").directive("kdsStepScroll",KdsStepScroll),KdsStepScroll.$inject=["$parse"],angular.module("kds.stepper").directive("kdsStepper",KdsStepper),angular.module("kds.stepper").directive("kdsStepsTemplate",KdsStepsTemplate),KdsStepsTemplate.$inject=["$compile","$mdUtil"];